package wyg.scw.scwuser.utils;import com.google.gson.Gson;import lombok.Data;import lombok.extern.slf4j.Slf4j;import org.apache.http.HttpResponse;import org.apache.http.util.EntityUtils;import java.util.HashMap;import java.util.Map;import wyg.scw.common.exception.SmsTemplateException;@Data@Slf4jpublic class SmsTemplate {    private String host;    private String path;    private String method;    private String appcode;        /*Map<String, String> querys = new HashMap<String, String>();        querys.put("mobile", "15861972263");        querys.put("param", "code:1234");        querys.put("tpl_id", "TP1711063");*/    public void sendMsg(Map<String, String> querys) throws Exception {        Map<String, String> headers = new HashMap<String, String>();        headers.put("Authorization", "APPCODE " + appcode);        Map<String, String> bodys = new HashMap<String, String>();        HttpResponse response = HttpUtils.doPost(host, path, method, headers, querys, bodys);        int statusCode = response.getStatusLine().getStatusCode();        if (statusCode ==200){            String body = EntityUtils.toString(response.getEntity());            log.debug("body:" + body);            Gson gson = new Gson();            Map map = gson.fromJson(body, Map.class);            Object returnCode = map.get("return_code");            if ("00000".equals(returnCode)){                log.debug("短信发送成功");                return;            }else if("10002".equals(returnCode)){                throw new SmsTemplateException("模板不存在");            }else{                throw new SmsTemplateException("短信发送失败");            }        }else{            throw new SmsTemplateException("短信发送异常");        }    }}